{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./inventory.service\";\nexport let CartService = /*#__PURE__*/(() => {\n  class CartService {\n    constructor(inventoryService) {\n      this.inventoryService = inventoryService;\n      this.cartItems = [];\n      this.cartTotal = 0;\n      this.orderDetails = {};\n      this.inventoryService.populatedList$.subscribe(response => {\n        // console.log(response);\n        this.products = response;\n      });\n    }\n\n    addToCart(product) {\n      //Condition to increase product cart quantity instead of removing element from cart array\n      if (this.cartItems.find(p => p.id == product.id) && this.products.find(i => i.stock > 0)) {\n        let index = this.products.indexOf(product);\n        this.products[index].stock--;\n        this.cartItems.find(product => product.qty++);\n        this.cartTotal = this.getCartTotal();\n      } else {\n        if (this.products.find(i => i.stock > 0 && i.id == product.id)) {\n          let index = this.products.indexOf(product);\n          this.products[index].stock--;\n          this.products[index].qty++;\n          this.cartItems.push(product);\n          this.cartTotal = this.getCartTotal();\n        }\n      }\n\n      window.alert('product added');\n      console.log(this.products);\n      console.log(this.cartItems);\n    }\n\n    removeOneFromCart(product) {\n      //Condition to decrease product cart quantity instead of removing element from cart array\n      if (this.cartItems.find(p => p.id == product.id)) {\n        let index = this.products.indexOf(product);\n        this.products[index].stock++;\n        this.cartItems.find(product => product.qty--);\n        this.cartTotal = this.getCartTotal();\n      } else {\n        if (this.products.find(i => i.stock > 0 && i.id == product.id)) {\n          let index = this.products.indexOf(product);\n          this.products[index].stock++;\n          this.products[index].qty--;\n          this.cartItems.push(product);\n          this.cartTotal = this.getCartTotal();\n        }\n      }\n\n      window.alert('product removed');\n      console.log(this.products);\n      console.log(this.cartItems);\n    }\n\n    deleteFromCart(product) {\n      //Remove item from cart array\n      let index = this.cartItems.indexOf(product);\n      this.cartItems.splice(index, 1); //return inventory stock\n\n      this.products.find(p => p.id == product.id).qty = 0;\n      this.products.find(p => p.id == product.id).stock = 10; //Update cart total to reflect change\n\n      this.getCartTotal();\n      window.alert('Removed from cart');\n    }\n\n    getCartItems() {\n      return this.cartItems;\n    }\n\n    getCartTotal() {\n      let total = 0;\n\n      for (const product of this.cartItems) {\n        total += product.qty * product.price;\n      }\n\n      return total;\n    }\n\n    setOrderDetails(customer, cartTotal) {\n      this.orderDetails = {\n        name: customer.name,\n        total: cartTotal\n      };\n    }\n\n    getOrderDetails() {\n      console.log(this.orderDetails);\n      return this.orderDetails;\n    }\n\n    clearCart() {\n      this.cartItems = [];\n    }\n\n  }\n\n  CartService.ɵfac = function CartService_Factory(t) {\n    return new (t || CartService)(i0.ɵɵinject(i1.InventoryService));\n  };\n\n  CartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CartService,\n    factory: CartService.ɵfac\n  });\n  return CartService;\n})();","map":null,"metadata":{},"sourceType":"module"}